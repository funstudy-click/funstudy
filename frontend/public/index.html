<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FunStudy 11 Plus - Educational Quiz Platform</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ“</text></svg>">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>ğŸ“ FunStudy 11 Plus</h1>
        
        <!-- Login Section -->
        <section id="loginSection" class="section active">
            <h2>ğŸ‘‹ Welcome To 11 Plus! Please Sign In</h2>
            
            <!-- Debug info removed as requested
            <div class="debug-info">
                <strong>ğŸ” Debug Status:</strong><br>
                Server: <span id="server-status">Checking...</span><br>
                Auth Status: <span id="auth-status">Checking...</span><br>
                Error from URL: <span id="url-error">None</span>
            </div>
            -->
            
            <button class="btn" onclick="login()">ğŸ” Sign In with Cognito</button>
            <button class="btn btn-secondary" onclick="showSection('registerSection')">âœ¨ New User? Register</button>
            <div id="loginMessage"></div>
        </section>
        
        <!-- Registration Section -->
        <section id="registerSection" class="section">
            <h2>ğŸ“ Create Account</h2>
            <div class="form-group">
                <label for="registerEmail">ğŸ“§ Email:</label>
                <input type="email" id="registerEmail" placeholder="Enter your email">
            </div>
            <div class="form-group">
                <label for="registerPassword">ğŸ”’ Password:</label>
                <input type="password" id="registerPassword" placeholder="Create a password (min. 8 chars + symbols)">
                <small style="color: #6b7280; font-size: 0.75rem; margin-top: 4px;">
                    Password must be at least 8 characters and include: uppercase, lowercase, numbers, and symbols (!@#$%^&*)
                </small>
            </div>
            <div class="form-group">
                <label for="confirmPassword">ğŸ”’ Confirm Password:</label>
                <input type="password" id="confirmPassword" placeholder="Confirm your password">
            </div>
            <!-- Commented out grade level dropdown as requested
            <div class="form-group">
                <label for="gradeLevel">ğŸ¯ Grade Level:</label>
                <select id="gradeLevel">
                    <option value="GradeA">Grade A (Ages 5-7)</option>
                    <option value="GradeB">Grade B (Ages 8-10)</option>
                    <option value="GradeC">Grade C (Ages 11-13)</option>
                </select>
            </div>
            -->
            <button class="btn" onclick="register()">âœ¨ Create Account</button>
            <button class="btn btn-secondary" onclick="showSection('loginSection')">ğŸ”™ Back to Login</button>
            <div id="registerMessage"></div>
        </section>

        <!-- Email Verification Section -->
        <section id="verificationSection" class="section">
            <h2>ğŸ“§ Verify Your Email</h2>
            <p>We've sent a verification code to your email. Please enter it below:</p>
            <div class="form-group">
                <label for="verificationCode">ğŸ”¢ Verification Code:</label>
                <input type="text" id="verificationCode" placeholder="Enter 6-digit code">
            </div>
            <button class="btn" onclick="verifyEmail()">âœ… Verify Email</button>
            <button class="btn btn-secondary" onclick="resendVerificationCode()">ğŸ“§ Resend Code</button>
            <div id="verificationMessage"></div>
        </section>

        <!-- Subscription Section -->
        <section id="subscriptionSection" class="section">
            <h2>ğŸ’³ Subscribe to Access Quizzes</h2>
            <div class="subscription-container">
                <div class="subscription-info">
                    <h3>ğŸ“ Premium Features</h3>
                    <ul class="features-list">
                        <li>âœ… Access to all Grade A, B & C quizzes</li>
                        <li>âœ… Unlimited quiz attempts</li>
                        <li>âœ… Detailed performance analytics</li>
                        <li>âœ… Progress tracking</li>
                        <li>âœ… Subject-specific practice</li>
                    </ul>
                </div>
                
                <div class="paypal-form-container">
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top" class="paypal-form">
                        <input type="hidden" name="cmd" value="_s-xclick" />
                        <input type="hidden" name="hosted_button_id" value="SNZ2KRHA49UVQ" />
                        
                        <div class="subscription-options">
                            <label class="subscription-label">
                                <input type="hidden" name="on0" value="Subscribe Using PayPal"/>
                                <span class="subscription-title">ğŸ“… Choose Your Subscription</span>
                            </label>
                            
                            <div class="subscription-select">
                                <select name="os0" class="subscription-dropdown" title="Choose subscription duration">
                                    <option value="1 Year">ğŸ“Š 1 Year Subscription</option>
                                    <option value="Subscription For One Year">ğŸ¯ Annual Premium Access</option>
                                </select>
                            </div>
                        </div>
                        
                        <input type="hidden" name="currency_code" value="GBP" />
                        
                        <div class="payment-button-container">
                            <input type="image" 
                                   src="https://www.paypalobjects.com/en_GB/i/btn/btn_subscribe_LG.gif" 
                                   border="0" 
                                   name="submit" 
                                   title="PayPal - The safer, easier way to pay online!" 
                                   alt="Subscribe" 
                                   class="paypal-button" />
                        </div>
                    </form>
                </div>
                
                <div class="subscription-footer">
                    <p><small>ğŸ”’ Secure payment processing by PayPal</small></p>
                    <button class="btn btn-secondary" onclick="skipSubscription()">â­ï¸ Continue without subscription (Limited Access)</button>
                </div>
            </div>
        </section>

        <!-- Grade Selection Section -->
        <section id="gradeSection" class="section">
            <h2>ğŸ¯ Choose Your Grade Level</h2>
            <div class="grade-options">
                <button class="btn grade-btn" onclick="selectGrade('GradeA')">ğŸŒŸ Grade A (Ages 5-7)</button>
                <button class="btn grade-btn" onclick="selectGrade('GradeB')">ğŸš€ Grade B (Ages 8-10)</button>
                <button class="btn grade-btn" onclick="selectGrade('GradeC')">âš¡ Grade C (Ages 11-13)</button>
            </div>
            <div class="grade-navigation">
                <button class="btn btn-secondary" onclick="showSection('subscriptionSection')">ğŸ”™ Back to Subscription</button>
                <button class="btn btn-secondary logout-btn" onclick="logout()">ğŸšª Logout</button>
            </div>
        </section>

        <!-- Subject Selection Section -->
        <section id="subjectSection" class="section">
            <h2>ğŸ“š Choose Subject</h2>
            <div id="subject-options" class="subject-options">
                <!-- Subjects will be loaded dynamically -->
            </div>
            <button class="btn btn-secondary" onclick="showSection('gradeSection')">ğŸ”™ Back to Grade Selection</button>
        </section>

        <!-- Difficulty Selection Section -->
        <section id="difficultySection" class="section">
            <h2>âš¡ Choose Difficulty</h2>
            <div id="difficulty-options" class="difficulty-options">
                <!-- Difficulties will be loaded dynamically -->
            </div>
            <button class="btn btn-secondary" onclick="showSection('subjectSection')">ğŸ”™ Back to Subject Selection</button>
        </section>

        <!-- Quiz Section -->
        <section id="quizSection" class="section">
            <div id="quizContainer">
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <h3>ğŸ¯ Loading Quiz...</h3>
                    <p>Preparing your questions...</p>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section id="resultsSection" class="section">
            <div id="resultsContainer">
                <!-- Results will be dynamically populated here -->
            </div>
        </section>

        <!-- Loading indicator -->
        <div id="loader" class="loader hidden"></div>
    </div>

    <script src="js/app_clean.js"></script>
</body>
</html>
